<html>
<meta charset="utf-8">
<script src="https://cdn.jsdelivr.net/gh/upriss/educaJS/binaryRelations/d3.v4.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/upriss/educaJS/binaryRelations/graphlib-dot.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/upriss/educaJS/binaryRelations/dagre-d3.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/upriss/educaJS/binaryRelations/fcalibs.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/upriss/educaJS/binaryRelations/educa.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/upriss/educaJS/binaryRelations/educaJS.css" />
<noscript>This webpage needs Javascript!</noscript>
<body onLoad="binRel(glob_taskType,glob_inputArea,glob_oldInputAreaValue,glob_outArea2,glob_relType);">

<h2 id='header1'>Enter a binary relation:</h2>

<!--{[1,2], [0,1], [5,5]}-->

<form>

<textarea class="codeLineInput" id="inputArea" rows="3" onKeyUp="binRel(glob_taskType,glob_inputArea,glob_oldInputAreaValue,glob_outArea2,glob_relType);">
{[1,a], [1,b], [1,d], [2,b], [2,c], [3,a], [3,c], [3,d], [3,e], [4,b], [4,d]} 
</textarea>
</form>

<h2 id='header2'>Relation graph:</h2>

<svg width=90% height=300>  <g/> </svg>

<h2 id='header3'>Matrix:</h2>

<div class='style_container'>
<button id='buttCol' onclick="addColumn()">Add column</button>
<div style="float: right;">&nbsp;</div>
<button id='buttRow' onclick="addRow()">Add row</button>
</div>

<div id="outArea2"></div>

<div id="text1"></div>

<script>
// call this lang=en&ttype=lattice, lang=en&ttype=binRel, lang=en&ttype=binRel$rtype=auto
// same with lang=de   also possible graph=...
const params = new URLSearchParams(window.location.search);     // read the query string

//var glob_taskType = 'binRel';
var glob_taskType = 'lattice';
var glob_outArea2 = document.querySelector("#outArea2");
var glob_inputArea = document.querySelector("#inputArea");
var glob_oldInputAreaValue;
var glob_relType = '';
setUpZoomSupport();

if (params.get('graph')) {                 // read data from URL
   glob_inputArea.value = decodeURIComponent(params.get('graph'));
}
if (params.get('lang') == 'de') {
   document.querySelector("#header1").innerHTML='Geben Sie eine bin&auml;re Relation ein:';
   document.querySelector("#header2").innerHTML='Graph der Relation:';
   document.querySelector("#buttRow").innerHTML='neue Zeile';
   document.querySelector("#buttCol").innerHTML='neue Spalte';
}
if (params.get('ttype') == 'binRel') {  
   if (params.get('rtype') == 'auto') {  glob_relType = 'auto'; }
   glob_taskType = 'binRel'; 
} else if (params.get('ttype') == 'lattice') {  
   glob_relType = '';
   glob_taskType = 'lattice'; 
   document.querySelector("#header2").innerHTML='Lattice:';
   if (params.get('lang') == 'de') {
      document.querySelector("#header2").innerHTML='Verband:';
   }
} else if (params.get('ttype') == 'fca') {  
   glob_relType = '';
   glob_taskType = 'lattice'; 
   document.querySelector("#header2").innerHTML='Lattice:';
   document.querySelector("#header3").innerHTML='Formal Context:';
   document.querySelector("#header1").style.display = 'none';
   document.querySelector("#inputArea").style.display = 'none';
   document.querySelector("svg").setAttribute('height',400);
   document.querySelector("#text1").innerHTML='<div class="style_container"><p>&nbsp;</p><p><details><summary>How to use this page:</summary>The lattice display can be moved and scrolled. Clicking on the 0s and 1s of the context changes the values. The names in the context can be edited. Rows and columns that contain only 0s are removed from the context.</details></p></div>';
}
</script>
<p><hr><p>
<center>
Copyright 2022. <a href="https://www.upriss.org.uk">Uta Priss</a>, URL:
<a href="https://upriss.github.io/educaJS/">upriss.github.io/educaJS/</a>
</center>
</body>
</html>
